<cfg name="ClassOrchard" mode="@(Mode)" pipeline="linq" read-only="true">
  
      <environments>
        <add name="one">
          <parameters>
            <add name="Mode" value="default" />
            <add name="Folder" value="E:\Code\MyDD" />
            <add name="Password" value="*" />
          </parameters>
        </add>
      </environments>
      
      <connections>
        <add name="input" provider="postgresql" port="5432" database="TflMyDD" user="postgres" password="@(Password)" />
        <add name="output" 
             provider="file" 
             file="@(Folder)\mydd\tfl\output\class-output.xml" 
             header="&lt;Orchard&gt;&lt;Recipe&gt;&lt;Name&gt;Generated by Transformalize&lt;/Name&gt;&lt;Author&gt;dalenewman&lt;/Author&gt;&lt;/Recipe&gt;&lt;Data&gt;" 
             footer="&lt;/Data&gt;&lt;/Orchard&gt;" 
             delimiter="" />
        
      </connections>
      
      <templates>
        <add name="class" file="@(Folder)\mydd\tfl\templates\class.vtl" />
        <add name="blog_post" file="@(Folder)\mydd\tfl\templates\blog-post.vtl" />
      </templates>
      
      <entities>
        <add name="ClassStar">
          <fields>
            <add name="class_title" length="512" label="class title" output="false" t="htmlencode()" />
            <add name="class_description" label="class description" output="false" />
            <add name="class_cost" type="decimal" precision="6" scale="2" label="class cost" output="false" />
            <add name="class_created" type="datetime" label="class created" output="false" />
            <add name="class_modified" type="datetime" label="class modified" output="false" />
            <add name="class_title_slug" length="512" label="title slug" output="false" />
            <add name="instructor_first" length="128" label="instructor first" output="false" />
            <add name="instructor_last" length="128" label="instructor last" output="false" />
            <add name="instructor_avatar" length="200" label="instructor avatar" output="false" />
            <add name="instructor_bio" label="instructor bio" output="false" />
            <add name="instructor_created" type="datetime" label="instructor created" output="false" />
            <add name="instructor_modified" type="datetime" label="instructor modified" output="false" />
            <add name="instructor_full_name" length="128" label="instructor full name" output="false" />
            <add name="tags" length="128" output="false" />
            <add name="recipes" length="4000" output="false" />
            <add name="recipe_count" type="long" output="false" />
            <add name="schedule" length="4000" output="false"/>
            <add name="next_schedule_date" type="datetime" output="false" />
            <add name="next_schedule_date_utc" type="datetime" output="false" />
            <add name="prev_schedule_date" type="datetime" output="false" />
            <add name="prev_schedule_date_utc" type="datetime" output="false" />
            <add name="carousel_images" length="4000" output="false" />
            <add name="carousel_image_count" type="long" default="0" output="false" />
          </fields>
          <calculated-fields>
            <add name="today" type="datetime" default="now/d" output="false" />
            <add name="next_schedule_date_utc_formatted" t="copy(next_schedule_date_utc).format({0:s}Z)" output="false" />
            <add name="prev_schedule_date_utc_formatted" t="copy(prev_schedule_date_utc).format({0:s}Z)" output="false" />
            <add name="not_scheduled" t="copy(today,next_schedule_date_utc,prev_schedule_date_utc).js(next_schedule_date_utc.getYear() === 9999 && prev_schedule_date_utc < today)" output="false" />
            <add name="content" length="max" t="copy(*).velocity(class).htmlencode()" output="false" />
            <add name="blog_post" length="max" t="copy(*).velocity(blog_post)" primary-key="true" output="true" />
          </calculated-fields>
        </add>
      </entities>

</cfg>